@model MyProject.Web.Models.Orders.OrderViewSuccess

@{
	ViewData["Title"] = "Chi tiết đơn hàng";
}

<link href="/css/detailOrder.css" rel="stylesheet" />

<div class="container" style="margin-top: 14px;">
	<!-- Tiêu đề đơn hàng -->
	<div class="order-title-detail">
		<p class="fw-bold order-title">
			<span>Chi tiết đơn hàng #@Model.Order.Id -</span>
			<span class="text-success">
				@(Model.Order.OrderStatus == 4 ? "Hoàn thành" :
								Model.Order.OrderStatus == 3 ? "Đã hủy" :
								Model.Order.OrderStatus == 2 ? "Đang giao hàng" :
								Model.Order.OrderStatus == 1 ? "Đã xác nhận" :
								"Chờ xử lý")
			</span>
		</p>
		<p class="text-muted order-time ">Đặt lúc: @Model.Order.CreationTime.ToString("HH:mm - dd/MM/yyyy")</p>
	</div>
	<p style="font-size: 14px; color: #d0021c">Lý do hủy:</p>


	<!-- Thông tin người nhận -->
	<div class="row order-info-user">
		<div class="col-md-6">
			<div class="card p-3">
				<h5>
					<i class="fa fa-map-marker-alt"></i>
					THÔNG TIN NHẬN HÀNG
				</h5>
				<div class="order-info-customer">
					<span>Người nhận:</span>
					<p>@Model.Order.NameUser - 0866959003</p>
				</div>
				@* <p><strong>Nhận tại:</strong> @Model.Order.Address</p> *@
				@* <p><strong>Nhận lúc:</strong> Trước @Model.Order.ExpectedDelivery.ToString("HH:mm - dd/MM/yyyy")</p> *@
			</div>
		</div>

		<div class="col-md-6 order-info-payment">
			<div class="card p-3">
				<h5><i class="bi bi-credit-card"></i> HÌNH THỨC THANH TOÁN</h5>
				<p>@Model.Order.PaymentMethod</p>
			</div>
		</div>
	</div>

	<!-- Danh sách sản phẩm -->
	<div class="card mt-4">
		<div class="card-header">
			<h5><i class="bi bi-bag"></i> THÔNG TIN SẢN PHẨM</h5>
		</div>
		<div class="card-body">
			@foreach (var item in Model.OrderListDetail)
			{
				var product = Model.ProductList.FirstOrDefault(p => p.Id == item.ProductId);
				if (product != null)
				{
					<div class="row border-bottom pb-2 mb-2">
						<div class="col-md-2">
							<img src="@product.Image" class="img-fluid rounded" alt="@product.Name">
						</div>
						<div class="col-md-6">
							<h6>@product.Name</h6>
							<p class="text-success">Bảo hành: Còn BH đến @product.Price.ToString("dd/MM/yyyy")</p>
							<p class="text-muted">Số lượng: @item.Quantity</p>
						</div>
						<div class="col-md-4 text-end">
							<p class="fw-bold text-danger">@((item.UnitPrice - item.DiscountPrice).ToString("#,##0")) ₫</p>
							<p class="text-muted text-decoration-line-through">@item.UnitPrice.ToString("#,##0") ₫</p>
						</div>
					</div>
				}
			}
		</div>
	</div>

	<!-- Tổng tiền -->
	<div class="row mt-4">
		<div class="col-md-6"></div>
		<div class="col-md-6">
			<div class="card p-3">
				<p class="d-flex justify-content-between">
					<span>Tạm tính:</span>
					<strong>@Model.Order.TotalAmount.ToString("#,##0") ₫</strong>
				</p>
				<p class="d-flex justify-content-between">
					<span>Tổng tiền:</span>
					<strong>@Model.Order.TotalAmount.ToString("#,##0") ₫</strong>
				</p>
				@*   <p class="d-flex justify-content-between text-danger fw-bold">
          <span>Số tiền đã thanh toán:</span>
          <strong>@Model.Order.TotalPaid.ToString("#,##0") ₫</strong>
        </p> *@
			</div>
		</div>
	</div>

	<!-- Nút quay về -->
	<div class="text-center mt-4">
		<a href="@Url.Action("OrderList", "Order")" class="btn btn-outline-danger px-4">
			<i class="bi bi-arrow-left"></i> VỀ TRANG DANH SÁCH ĐƠN HÀNG
		</a>
	</div>
</div>
